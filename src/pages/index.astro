---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/hero.astro';
import { getCollection } from 'astro:content';

// Загружаем услуги из Content Collections
const allServices = await getCollection('services');
const services = allServices.sort((a, b) => a.data.order - b.data.order);

const base = import.meta.env.BASE_URL;
---

<Layout title="StandartSoft Plus - Разработка мобильных приложений и веб-сервисов">
  <!-- Hero секция -->
  <Hero 
    slogan="Innovate with Confidence, Code with Standards!"
  />

  <!-- О компании (ОБНОВЛЕНО) -->
  <section id="about" class="about-section">
    <div class="container-narrow">
      <h2 class="text-center">О нас</h2>
      <div class="about-content">
        <p class="lead text-center">
          StandartSoft Plus — команда с опытом управления ИТ-инфраструктурой 
          в телекоме, энергетике и промышленности. Мы знаем, как устроен бизнес 
          изнутри, потому что сами управляли крупными предприятиями.
        </p>
        <p class="text-center">
          Разрабатываем цифровые решения, применяя стандарты надёжности из критичных 
          отраслей, где простой системы недопустим. Проектируем архитектуру с расчётом 
          на рост и высокие нагрузки — так, как делали это для операторов связи 
          и промышленных холдингов.
        </p>
        <p class="text-center">
          Для малого и среднего бизнеса это означает доступ к экспертизе корпоративного 
          уровня без соответствующих бюджетов. Мы понимаем задачи собственника, 
          потому что сами принимали такие решения.
        </p>
      </div>
    </div>
  </section>

  <!-- Услуги (ДИНАМИЧЕСКИЕ) -->
  <section id="services" class="services-section">
    <div class="container">
      <h2 class="text-center">Наши услуги</h2>
      
      <div class="services-grid">
        {services.map((service) => (
          <div class="card service-card">
            <div class="service-icon">{service.data.icon}</div>
            <h3>{service.data.title}</h3>
            <p>{service.data.description}</p>
            
            <ul class="service-features">
              {service.data.features.map((feature) => (
                <li>{feature}</li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Преимущества (РАСШИРЕНО) -->
  <section class="benefits-section">
    <div class="container-narrow">
      <h2 class="text-center">Почему выбирают нас</h2>
      
      <div class="benefits-list">
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Промышленная надёжность</h3>
            <p>
              Применяем стандарты проектирования из телекома и энергетики, где отказ 
              системы стоит миллионы. Закладываем архитектуру с запасом прочности — 
              ваше приложение выдержит рост в 10 раз без переделок. Код структурирован 
              так, что его легко поддерживать и масштабировать даже через 5 лет.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Опыт высоких нагрузок</h3>
            <p>
              Проектировали системы для операторов связи и промышленных предприятий, 
              где тысячи пользователей работают одновременно 24/7. Знаем, как обеспечить 
              стабильность в пиковые часы и как избежать узких мест в архитектуре. 
              Ваше приложение не упадёт, когда клиентов станет в 100 раз больше.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Взгляд собственника, а не подрядчика</h3>
            <p>
              Мы не просто пишем код по ТЗ — тесно работаем с вами на этапе проектирования, 
              анализируем бизнес-процессы и предлагаем решения, которые действительно окупятся. 
              Опыт управления предприятиями позволяет видеть полную картину: от автоматизации 
              рутины до стратегии цифрового развития. Экономим ваш бюджет, отсекая лишнее 
              на этапе проектирования.
            </p>
          </div>
        </div>

        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Проверенные технологии, а не хайп</h3>
            <p>
              Не гонимся за модными трендами. Выбираем стек с доказанной надёжностью 
              и долгосрочной поддержкой — те же инструменты, на которых работают банки 
              и государственные сервисы. Ваша система не устареет через год и не потребует 
              полной переписи, потому что мы выбираем стабильность.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Прозрачность и контроль</h3>
            <p>
              Постоянная связь на всех этапах разработки. Еженедельные демонстрации 
              работающего функционала, доступ к репозиторию, понятная документация. 
              Вы всегда знаете, на что идут деньги и когда получите результат. 
              Никаких сюрпризов в конце проекта.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Безопасность и соответствие требованиям</h3>
            <p>
              Разрабатываем с учётом требований 152-ФЗ, ФСТЭК и отраслевых стандартов. 
              Шифрование данных, резервное копирование, аудит доступа — всё, что необходимо 
              для защиты вашего бизнеса и клиентских данных. Знаем, как пройти проверки 
              регуляторов, потому что сами через это проходили.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Портфолио (краткий обзор) -->
  <section id="portfolio-preview" class="portfolio-preview">
    <div class="container">
      <h2 class="text-center">Реализованные проекты</h2>
      <p class="text-center lead">
        Опыт разработки комплексных решений для медицины, транспорта и других отраслей
      </p>
      
      <div class="projects-preview-grid">
        <a href={`${base}jobs/job-1/`} class="project-preview-card">
          <div class="project-preview-content">
            <h3>Гастроклиникс</h3>
            <p>Цифровая экосистема для сети медицинских центров</p>
            <div class="project-tags">
              <span class="tag">Mobile</span>
              <span class="tag">Healthcare</span>
              <span class="tag">CRM</span>
            </div>
          </div>
        </a>

        <a href={`${base}jobs/job-2/`} class="project-preview-card">
          <div class="project-preview-content">
            <h3>Ваше такси</h3>
            <p>Автоматизация диспетчерской службы и агрегатор такси</p>
            <div class="project-tags">
              <span class="tag">Mobile</span>
              <span class="tag">Taxi</span>
              <span class="tag">Geolocation</span>
            </div>
          </div>
        </a>
      </div>

      <div class="text-center" style="margin-top: var(--spacing-xl);">
        <a href={`${base}portfolio/`} class="btn btn-secondary">Все проекты →</a>
      </div>
    </div>
  </section>

  <!-- Наш подход (ПЕРЕРАБОТАНО из "Технологии") -->
  <section class="tech-section">
    <div class="container-narrow">
      <h2 class="text-center">Наш подход к разработке</h2>
      <p class="text-center">
        Используем инструменты и практики, проверенные в критичных отраслях
      </p>
      
      <div class="tech-grid">
        <div class="tech-category">
          <h4>Облачная инфраструктура</h4>
          <p>
            Развёртываем на российских площадках
            или зарубежных серверах по вашему выбору. Автоматическое масштабирование 
            при росте нагрузки — платите только за используемые ресурсы.
          </p>
        </div>
        
        <div class="tech-category">
          <h4>Экономия бюджета</h4>
          <p>
            Кроссплатформенная разработка: один код работает на iOS и Android. 
            Экономия до 40% времени и денег по сравнению с раздельной разработкой. 
            Обновления выходят одновременно на обеих платформах.
          </p>
        </div>
        
        <div class="tech-category">
          <h4>Безопасность данных</h4>
          <p>
            Шифрование по банковским стандартам. Соответствие 152-ФЗ и требованиям ФСТЭК. 
            Регулярное резервное копирование — ваши данные защищены даже при форс-мажоре. 
            Аудит доступа и журналирование событий.
          </p>
        </div>
        
        <div class="tech-category">
          <h4>Надёжность и отказоустойчивость</h4>
          <p>
            Автоматическое тестирование перед каждым обновлением — баги обнаруживаются 
            до релиза. Мониторинг 24/7 с оповещениями. Резервирование критичных компонентов. 
            Системы работают стабильно даже при пиковых нагрузках.
          </p>
        </div>
        
        <div class="tech-category">
          <h4>Долгосрочная поддержка</h4>
          <p>
            Выбираем технологии с гарантированной поддержкой минимум на 5 лет (LTS-версии). 
            Ваша система не устареет через год. Документируем код и архитектуру — 
            при необходимости другая команда сможет продолжить разработку.
          </p>
        </div>
        
        <div class="tech-category">
          <h4>Интеграции</h4>
          <p>
            Подключаем платёжные системы (ЮKassa, Сбербанк, Тинькофф), сервисы доставки, 
            1С, CRM-системы. Связываем разрозненные инструменты в единую экосистему. 
            API для взаимодействия с вашими внутренними системами.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Как мы работаем (НОВЫЙ РАЗДЕЛ) -->
  <section class="process-section">
    <div class="container-narrow">
      <h2 class="text-center">Как мы работаем</h2>
      <p class="text-center lead">
        Прозрачный процесс без скрытых платежей и неожиданностей
      </p>
      
      <div class="process-steps">
        <div class="process-step">
          <div class="step-number">01</div>
          <div class="step-content">
            <h3>Бесплатная консультация</h3>
            <p>
              Встречаемся онлайн или лично. Разбираем вашу задачу, обсуждаем возможные 
              подходы к решению. Рассказываем про технологии и риски понятным языком. 
              Оцениваем примерный порядок бюджета и сроков.
            </p>
            <span class="step-badge free">Бесплатно</span>
          </div>
        </div>

        <div class="process-step">
          <div class="step-number">02</div>
          <div class="step-content">
            <h3>Техническое задание</h3>
            <p>
              Прописываем детальное ТЗ в тесном контакте с вами. Описываем каждый экран, 
              логику работы, интеграции. Вы видите, за что платите, ещё до старта разработки. 
              Фиксируем функционал, сроки и стоимость — никаких «так не договаривались».
            </p>
            <span class="step-badge paid">Фиксированная оплата</span>
          </div>
        </div>

        <div class="process-step">
          <div class="step-number">03</div>
          <div class="step-content">
            <h3>Разработка и контроль</h3>
            <p>
              Работаем по утверждённому ТЗ. Еженедельные созвоны с демонстрацией прогресса. 
              Доступ к тестовой версии — видите результат в реальном времени. Вносим правки 
              по ходу, если это не меняет объём работ.
            </p>
            <span class="step-badge">По договору</span>
          </div>
        </div>

        <div class="process-step">
          <div class="step-number">04</div>
          <div class="step-content">
            <h3>Запуск и поддержка</h3>
            <p>
              Тестируем перед релизом, публикуем в сторы, разворачиваем на серверах. 
              Передаём документацию и обучаем ваших сотрудников. Гарантийная поддержка 
              и техническое сопровождение по желанию.
            </p>
            <span class="step-badge">Опционально</span>
          </div>
        </div>
      </div>

      <div class="process-note">
        <p>
          <strong>Почему мы берём оплату за ТЗ?</strong> Качественное техническое задание — 
          это 30% успеха проекта. Мы тратим десятки часов на анализ, проектирование архитектуры 
          и согласование деталей с вами. Символическая оплата отсекает случайных людей 
          и гарантирует, что мы работаем с серьёзным заказчиком. Зато вы получаете документ, 
          который можно показать любому подрядчику для оценки.
        </p>
      </div>
    </div>
  </section>

  <!-- CTA (ОБНОВЛЕНО) -->
  <section class="cta-section">
    <div class="container-narrow text-center">
      <h2>Готовы обсудить ваш проект?</h2>
      <p class="slogan">
        Первая консультация бесплатно — разберём задачу и предложим подход к решению
      </p>
      <div class="cta-buttons">
        <a href="#contact" class="btn btn-primary">Записаться на консультацию</a>
        <a href={`${base}portfolio/`} class="btn btn-secondary">Наши проекты</a>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Секции */
  section {
    padding: var(--spacing-xl) 0;
  }

  .lead {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    max-width: 700px;
    margin: 0 auto var(--spacing-lg);
  }

  /* О компании */
  .about-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.02), rgba(229, 28, 39, 0.02));
  }

  .about-content p {
    margin-bottom: var(--spacing-md);
  }

  .about-content p:last-child {
    margin-bottom: 0;
  }

  /* Сетка услуг */
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .service-card {
    display: flex;
    flex-direction: column;
  }

  .service-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
  }

  .service-features {
    list-style: none;
    padding: 0;
    margin-top: auto;
    padding-top: var(--spacing-md);
  }

  .service-features li {
    padding: var(--spacing-xs) 0;
    color: var(--color-text-muted);
    font-size: 0.95rem;
  }

  .service-features li::before {
    content: "→ ";
    color: var(--color-secondary);
    font-weight: bold;
    margin-right: var(--spacing-xs);
  }

  /* Преимущества */
  .benefits-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.03), rgba(229, 28, 39, 0.03));
  }

  .benefits-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .benefit-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
  }

  .benefit-icon {
    width: 40px;
    height: 40px;
    background: var(--gradient-brand);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  /* Превью портфолио */
  .projects-preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .project-preview-card {
    display: block;
    background: white;
    border: 1px solid rgba(61, 17, 57, 0.1);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
  }

  .project-preview-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-secondary);
  }

  .project-preview-content h3 {
    margin-bottom: var(--spacing-sm);
  }

  .project-preview-content p {
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-md);
  }

  .project-tags {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
  }

  .project-tags .tag {
    font-size: 0.75rem;
    padding: var(--spacing-xs) var(--spacing-sm);
  }

  /* Наш подход */
  .tech-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.02), rgba(229, 28, 39, 0.02));
  }

  .tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .tech-category {
    padding: var(--spacing-lg);
    background: white;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid rgba(61, 17, 57, 0.05);
    transition: all var(--transition-base);
  }

  .tech-category:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--color-secondary);
  }

  .tech-category h4 {
    color: var(--color-primary);
    font-family: var(--font-heading);
    font-size: 1.25rem;
    font-weight: 300;
    margin-bottom: var(--spacing-sm);
  }

  .tech-category p {
    font-size: 0.95rem;
    color: var(--color-text-muted);
    margin: 0;
    line-height: 1.6;
  }

  /* Процесс работы (НОВЫЙ) */
  .process-section {
    background: white;
    padding: var(--spacing-xl) 0;
  }

  .process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xl);
    margin-top: var(--spacing-xl);
    position: relative;
  }

  /* Вертикальная линия между шагами */
  .process-steps::before {
    content: '';
    position: absolute;
    left: 30px;
    top: 60px;
    bottom: 60px;
    width: 2px;
    background: linear-gradient(to bottom, 
      var(--color-secondary), 
      var(--color-primary)
    );
    opacity: 0.2;
  }

  .process-step {
    display: flex;
    gap: var(--spacing-lg);
    align-items: flex-start;
    position: relative;
  }

  .step-number {
    flex-shrink: 0;
    width: 60px;
    height: 60px;
    background: var(--gradient-brand);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 300;
    box-shadow: var(--shadow-md);
    position: relative;
    z-index: 1;
  }

  .step-content {
    flex: 1;
    padding-top: var(--spacing-xs);
  }

  .step-content h3 {
    font-family: var(--font-heading);
    font-weight: 300;
    color: var(--color-primary);
    margin-bottom: var(--spacing-sm);
    font-size: 1.5rem;
  }

  .step-content p {
    color: var(--color-text-muted);
    line-height: 1.6;
    margin-bottom: var(--spacing-md);
  }

  .step-badge {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    background: var(--color-bg);
    border: 1px solid rgba(61, 17, 57, 0.1);
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 500;
  }

  .step-badge.free {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05));
    border-color: rgba(34, 197, 94, 0.3);
    color: rgb(22, 163, 74);
  }

  .step-badge.paid {
    background: linear-gradient(135deg, rgba(229, 28, 39, 0.1), rgba(229, 28, 39, 0.05));
    border-color: rgba(229, 28, 39, 0.3);
    color: var(--color-secondary);
  }

  .process-note {
    margin-top: var(--spacing-xl);
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.03), rgba(229, 28, 39, 0.03));
    border-left: 4px solid var(--color-secondary);
    border-radius: var(--radius-md);
  }

  .process-note p {
    color: var(--color-text);
    line-height: 1.7;
    margin: 0;
  }

  .process-note strong {
    color: var(--color-primary);
  }

  /* CTA секция */
  .cta-section {
    background: var(--gradient-brand);
    color: white;
  }

  .cta-section h2,
  .cta-section .slogan {
    color: white;
  }

  .cta-buttons {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
    margin-top: var(--spacing-lg);
    flex-wrap: wrap;
  }

  .cta-section .btn-primary {
    background: white;
    color: var(--color-primary);
  }

  .cta-section .btn-primary:hover {
    background: var(--color-bg);
    transform: scale(1.05);
  }

  .cta-section .btn-secondary {
    border-color: white;
    color: white;
  }

  .cta-section .btn-secondary:hover {
    background: white;
    color: var(--color-primary);
  }

  /* Адаптивность */
  @media (max-width: 768px) {
    .services-grid {
      grid-template-columns: 1fr;
    }

    .projects-preview-grid {
      grid-template-columns: 1fr;
    }

    .tech-grid {
      grid-template-columns: 1fr;
    }

    .process-steps::before {
      left: 22px;
    }

    .step-number {
      width: 45px;
      height: 45px;
      font-size: 1.25rem;
    }

    .step-content h3 {
      font-size: 1.25rem;
    }

    .process-note {
      padding: var(--spacing-md);
      font-size: 0.9rem;
    }

    .cta-buttons {
      flex-direction: column;
      align-items: center;
    }

    .cta-buttons .btn {
      width: 100%;
      max-width: 300px;
    }
  }
</style>
