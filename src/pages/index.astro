---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/hero.astro';
import { getCollection } from 'astro:content';

// Загружаем услуги из Content Collections
const allServices = await getCollection('services');
const services = allServices.sort((a, b) => a.data.order - b.data.order);

const base = import.meta.env.BASE_URL;
---

<Layout title="StandartSoft Plus - Разработка мобильных приложений и веб-сервисов">
  <!-- Hero секция -->
  <Hero 
    slogan="Innovate with Confidence, Code with Standards!"
  />

  <!-- О компании -->
  <section id="about" class="about-section">
    <div class="container-narrow">
      <h2 class="text-center">О нас</h2>
      <p class="lead text-center">
        Мы разрабатываем надёжное программное обеспечение для бизнеса. 
        Специализируемся на мобильных приложениях, веб-платформах и автоматизации бизнес-процессов.
      </p>
    </div>
  </section>

  <!-- Услуги (ДИНАМИЧЕСКИЕ) -->
  <section id="services" class="services-section">
    <div class="container">
      <h2 class="text-center">Наши услуги</h2>
      
      <div class="services-grid">
        {services.map((service) => (
          <div class="card service-card">
            <div class="service-icon">{service.data.icon}</div>
            <h3>{service.data.title}</h3>
            <p>{service.data.description}</p>
            
            <ul class="service-features">
              {service.data.features.map((feature) => (
                <li>{feature}</li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Преимущества -->
  <section class="benefits-section">
    <div class="container-narrow">
      <h2 class="text-center">Почему выбирают нас</h2>
      
      <div class="benefits-list">
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Стандарты качества</h3>
            <p>
              Следуем лучшим практикам разработки: чистый код, типизация TypeScript, 
              покрытие тестами, документация. Код, который легко поддерживать.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Инновационный подход</h3>
            <p>
              Используем актуальные технологии и фреймворки. Следим за трендами индустрии 
              и применяем проверенные решения для достижения лучших результатов.
            </p>
          </div>
        </div>
        
        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Прозрачность процесса</h3>
            <p>
              Постоянная связь с клиентом на всех этапах разработки. Регулярные демонстрации прогресса, 
              открытый доступ к репозиторию, понятная документация.
            </p>
          </div>
        </div>

        <div class="benefit-item">
          <span class="benefit-icon">✓</span>
          <div>
            <h3>Оптимизация и производительность</h3>
            <p>
              Создаём быстрые и надёжные приложения. Оптимизируем загрузку, минимизируем размер, 
              обеспечиваем плавную работу на любых устройствах.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Портфолио (краткий обзор) -->
  <section id="portfolio-preview" class="portfolio-preview">
    <div class="container">
      <h2 class="text-center">Реализованные проекты</h2>
      <p class="text-center lead">
        Опыт разработки комплексных решений для медицины, транспорта и других отраслей
      </p>
      
      <div class="projects-preview-grid">
        <a href={`${base}jobs/job-1/`} class="project-preview-card">
          <div class="project-preview-content">
            <h3>Гастроклиникс</h3>
            <p>Цифровая экосистема для сети медицинских центров</p>
            <div class="project-tags">
              <span class="tag">Mobile</span>
              <span class="tag">Healthcare</span>
              <span class="tag">CRM</span>
            </div>
          </div>
        </a>

        <a href={`${base}jobs/job-2/`} class="project-preview-card">
          <div class="project-preview-content">
            <h3>Ваше такси</h3>
            <p>Автоматизация диспетчерской службы и агрегатор такси</p>
            <div class="project-tags">
              <span class="tag">Mobile</span>
              <span class="tag">Taxi</span>
              <span class="tag">Geolocation</span>
            </div>
          </div>
        </a>
      </div>

      <div class="text-center" style="margin-top: var(--spacing-xl);">
        <a href={`${base}portfolio/`} class="btn btn-secondary">Все проекты →</a>
      </div>
    </div>
  </section>

  <!-- Технологии -->
  <section class="tech-section">
    <div class="container-narrow">
      <h2 class="text-center">Технологии</h2>
      <p class="text-center">
        Работаем с современным стеком технологий для создания надёжных решений
      </p>
      
      <div class="tech-grid">
        <div class="tech-category">
          <h4>Frontend</h4>
          <p>React, Vue, Astro, TypeScript, Tailwind CSS</p>
        </div>
        
        <div class="tech-category">
          <h4>Mobile</h4>
          <p>React Native, Flutter, iOS (Swift), Android (Kotlin)</p>
        </div>
        
        <div class="tech-category">
          <h4>Backend</h4>
          <p>Node.js, TypeScript, Firebase, Supabase</p>
        </div>
        
        <div class="tech-category">
          <h4>Tools</h4>
          <p>Git, Docker, CI/CD, Figma, VS Code</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta-section">
    <div class="container-narrow text-center">
      <h2>Готовы начать проект?</h2>
      <p class="slogan">Свяжитесь с нами для обсуждения вашей идеи</p>
      <div class="cta-buttons">
        <a href="#contact" class="btn btn-primary">Связаться с нами</a>
        <a href={`${base}portfolio/`} class="btn btn-secondary">Портфолио</a>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Секции */
  section {
    padding: var(--spacing-xl) 0;
  }

  .lead {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    max-width: 700px;
    margin: 0 auto var(--spacing-lg);
  }

  /* О компании */
  .about-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.02), rgba(229, 28, 39, 0.02));
  }

  /* Сетка услуг */
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .service-card {
    display: flex;
    flex-direction: column;
  }

  .service-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
  }

  .service-features {
    list-style: none;
    padding: 0;
    margin-top: auto;
    padding-top: var(--spacing-md);
  }

  .service-features li {
    padding: var(--spacing-xs) 0;
    color: var(--color-text-muted);
    font-size: 0.95rem;
  }

  .service-features li::before {
    content: "→ ";
    color: var(--color-secondary);
    font-weight: bold;
    margin-right: var(--spacing-xs);
  }

  /* Преимущества */
  .benefits-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.03), rgba(229, 28, 39, 0.03));
  }

  .benefits-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .benefit-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
  }

  .benefit-icon {
    width: 40px;
    height: 40px;
    background: var(--gradient-brand);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  /* Превью портфолио */
  .projects-preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .project-preview-card {
    display: block;
    background: white;
    border: 1px solid rgba(61, 17, 57, 0.1);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
  }

  .project-preview-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-secondary);
  }

  .project-preview-content h3 {
    margin-bottom: var(--spacing-sm);
  }

  .project-preview-content p {
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-md);
  }

  .project-tags {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
  }

  .project-tags .tag {
    font-size: 0.75rem;
    padding: var(--spacing-xs) var(--spacing-sm);
  }

  /* Технологии */
  .tech-section {
    background: linear-gradient(135deg, rgba(61, 17, 57, 0.02), rgba(229, 28, 39, 0.02));
  }

  .tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
  }

  .tech-category {
    text-align: center;
    padding: var(--spacing-lg);
    background: white;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
  }

  .tech-category h4 {
    color: var(--color-primary);
    font-family: var(--font-heading);
    font-size: 1.25rem;
    margin-bottom: var(--spacing-sm);
  }

  .tech-category p {
    font-size: 0.9rem;
    color: var(--color-text-muted);
    margin: 0;
  }

  /* CTA секция */
  .cta-section {
    background: var(--gradient-brand);
    color: white;
  }

  .cta-section h2,
  .cta-section .slogan {
    color: white;
  }

  .cta-buttons {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
    margin-top: var(--spacing-lg);
    flex-wrap: wrap;
  }

  .cta-section .btn-primary {
    background: white;
    color: var(--color-primary);
  }

  .cta-section .btn-primary:hover {
    background: var(--color-bg);
    transform: scale(1.05);
  }

  .cta-section .btn-secondary {
    border-color: white;
    color: white;
  }

  .cta-section .btn-secondary:hover {
    background: white;
    color: var(--color-primary);
  }

  /* Адаптивность */
  @media (max-width: 768px) {
    .services-grid {
      grid-template-columns: 1fr;
    }

    .projects-preview-grid {
      grid-template-columns: 1fr;
    }

    .tech-grid {
      grid-template-columns: 1fr;
    }

    .cta-buttons {
      flex-direction: column;
      align-items: center;
    }

    .cta-buttons .btn {
      width: 100%;
      max-width: 300px;
    }
  }
</style>
